<!doctype html>
<html lang="es" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Copo de Nieve de Koch — Flask</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: radial-gradient(ellipse at top, #0b1020, #0a0e19) fixed; }
    .card { background: rgba(20,26,44,.8); border: 1px solid rgba(255,255,255,.08); }
    .form-label { font-weight: 600; }
    .preview { background:#0b1020; border-radius: 12px; padding: 12px; }
  </style>
</head>
<body>
<div class="container py-4">
  <h1 class="mb-3 fw-bold">Copo de Nieve de Koch</h1>
  <p class="text-secondary">Elige qué dibujar, ajusta el orden de recursión y estilos, y visualizarás el resultado abajo. Puedes descargar en PNG o SVG.</p>

  <form class="row g-3" method="get" action="{{ url_for('index') }}">
    <div class="col-md-4">
      <label class="form-label">Figura</label>
      <select class="form-select" name="fig">
        {% for key,label in [
          ('curve','Curva (1 lado)'),
          ('two','Media silueta (2 lados)'),
          ('snow','Copo completo (3 lados)')
        ] %}
          <option value="{{key}}" {{ 'selected' if params.fig==key else '' }}>{{label}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Orden (0–7)</label>
      <input type="number" min="0" max="7" step="1" class="form-control" name="order" value="{{ params.order }}">
    </div>

    <div class="col-md-4">
      <label class="form-label">Ancho de línea</label>
      <input type="number" min="1" max="6" step="0.5" class="form-control" name="lw" value="{{ params.lw }}">
    </div>

    <div class="col-md-6">
      <label class="form-label">Color principal</label>
      <input type="color" class="form-control form-control-color" name="c1" value="{{ params.c1 }}">
    </div>

    <div class="col-md-6">
      <label class="form-label">Color secundario/terciario</label>
      <input type="color" class="form-control form-control-color" name="c2" value="{{ params.c2 }}">
    </div>

    <div class="col-12">
      <button class="btn btn-primary me-2" type="submit">Actualizar</button>
      <a class="btn btn-outline-light me-2" href="{{ plot_url }}">Abrir imagen</a>
      <a class="btn btn-success me-2" href="{{ download_png }}">Descargar PNG</a>
      <a class="btn btn-warning" href="{{ download_svg }}">Descargar SVG</a>
    </div>
  </form>

  <hr class="my-4">

  <div class="card">
    <div class="card-header">Vista previa</div>
    <div class="card-body">
      <div class="preview text-center">
        <img class="img-fluid" style="max-height:70vh" src="{{ plot_url }}" alt="preview">
      </div>
    </div>
  </div>

  <footer class="mt-4 text-muted small">
    <p>Consejo: un orden entre 3 y 6 suele dar una figura detallada. A mayor orden, más segmentos se generan.</p>
  </footer>
</div>
</body>
</html>
